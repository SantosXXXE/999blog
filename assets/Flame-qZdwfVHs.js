import{_ as r}from"./ValaxyMain.vue_vue_type_style_index_0_lang-DojDVWuK.js";import{a as o,p as k,o as E,c,w as a,f as g,r as e,g as s,h as i}from"./app-C8XBX7-p.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-CyWMvqIB.js";import"./layout-Bw8rCNBD.js";import"./YunCard.vue_vue_type_script_setup_true_lang-jldVjsX8.js";import"./index-C5okkQwF.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-C8gCtuHS.js";import"./post-B-0TVOHP.js";const y=s("h1",{id:"如何用flutter框架与flame引擎打造全平台游戏",tabindex:"-1"},[i("如何用flutter框架与Flame引擎打造全平台游戏 "),s("a",{class:"header-anchor",href:"#如何用flutter框架与flame引擎打造全平台游戏","aria-label":'Permalink to "如何用flutter框架与Flame引擎打造全平台游戏"'},"​")],-1),m=s("h2",{id:"前言",tabindex:"-1"},[i("前言 "),s("a",{class:"header-anchor",href:"#前言","aria-label":'Permalink to "前言"'},"​")],-1),F=s("p",null,"最近在写题的时候遇到一个棘手的问题，如何用dart语言快速开发一个2d平面游戏，查询许多资料后才发现官方有这样的一个游戏引擎来协助开发，本文是对这个Flame游戏引擎的简单介绍",-1),u=s("h3",{id:"关于flame",tabindex:"-1"},[i("关于Flame "),s("a",{class:"header-anchor",href:"#关于flame","aria-label":'Permalink to "关于Flame"'},"​")],-1),C=s("p",null,"Flame是一个模块化的Flutter游戏引擎，为游戏提供了一套完整的解决方案。它使用了Flutter提供的强大基础设施，但简化了构建项目所需的代码。",-1),_=s("p",null,"它为您提供了一个简单而有效的游戏循环实现，以及游戏中可能需要的必要功能。例如：输入、图像、精灵图、精灵表、动画、碰撞检测和一个组件系统，我们称之为Flame Component System（简称FCS）。",-1),v=s("p",null,"我们还提供了扩展Flame功能的独立包：",-1),b=s("p",null,"flame_audio：使用AudioPlayers软件包提供音频功能 flame_forge2d：使用我们自己的Box2D端口Forge2D提供物理功能 flame_tiled：整合了tiled包 您可以选择任何您需要的部分，因为它们都是独立的和模块化的。",-1),f=s("h3",{id:"安装方式",tabindex:"-1"},[i("安装方式 "),s("a",{class:"header-anchor",href:"#安装方式","aria-label":'Permalink to "安装方式"'},"​")],-1),A=s("p",null,"Flame是基于flutter的一个插件，所以我们只需要在pub.dev获取最新版本并添加到依赖 通过在pubspec.yaml中放入以下内容，将pub包作为您的依赖项：",-1),B=s("div",{class:"language-yml vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"yml"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"dependencies"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  flame"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},": "),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"1.2.1")])])]),s("button",{class:"collapse"})],-1),D=s("h3",{id:"文件结构",tabindex:"-1"},[i("文件结构 "),s("a",{class:"header-anchor",href:"#文件结构","aria-label":'Permalink to "文件结构"'},"​")],-1),G=s("p",null,[i("Flame 为您的项目提供了一个建议的结构，其中包括标准 Flutterassets 目录以及两个子目录："),s("code",null,"audio"),i("和"),s("code",null,"images")],-1),x=s("p",null,"如果使用以下示例代码：",-1),P=s("div",{class:"language-dart vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"dart"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," main"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  FlameAudio"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"play"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'explosion.mp3'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  Flame"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".images."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"load"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'player.png'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  Flame"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".images."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"load"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'enemy.png'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})],-1),S=s("p",null,"Flame 期望在其中找到文件的文件结构是：",-1),M=s("div",{class:"language- vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"}),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",null,".")]),i(`
`),s("span",{class:"line"},[s("span",null,"└── assets")]),i(`
`),s("span",{class:"line"},[s("span",null,"    ├── audio")]),i(`
`),s("span",{class:"line"},[s("span",null,"    │   └── explosion.mp3")]),i(`
`),s("span",{class:"line"},[s("span",null,"    └── images")]),i(`
`),s("span",{class:"line"},[s("span",null,"        ├── enemy.png")]),i(`
`),s("span",{class:"line"},[s("span",null,"        └── player.png")])])]),s("button",{class:"collapse"})],-1),$=s("p",null,"或者，您可以将audio文件夹拆分为两个子文件夹，一个music用于sfx。",-1),z=s("p",null,"不要忘记将这些文件添加到您的pubspec.yaml文件中：",-1),I=s("div",{class:"language-yml vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"yml"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"flutter"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#22863A","--shiki-dark":"#85E89D"}},"  assets"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},":")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    - "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"assets/audio/explosion.mp3")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    - "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"assets/images/player.png")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    - "),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"assets/images/enemy.png")])])]),s("button",{class:"collapse"})],-1),L=s("p",null,"如果您想改变这个结构，可以使用prefix参数创建您自己的AssetsCache、 ImagesCache、AudioCache和SoundPool实例，而不是使用由Flame提供的全局实例",-1),w=s("h3",{id:"游戏循环",tabindex:"-1"},[i("游戏循环 "),s("a",{class:"header-anchor",href:"#游戏循环","aria-label":'Permalink to "游戏循环"'},"​")],-1),R=s("h4",{id:"flamegame",tabindex:"-1"},[i("FlameGame "),s("a",{class:"header-anchor",href:"#flamegame","aria-label":'Permalink to "FlameGame"'},"​")],-1),T=s("p",null,[s("code",null,"FlameGame"),i("是Flame中最基本和最常用的"),s("code",null,"Game"),i("类。")],-1),W=s("p",null,[s("code",null,"FlameGame"),i("是一个基于"),s("code",null,"Game"),i("类实现的组件。基本上它有一个组件列表，并且通过更新和渲染调用所有已经被添加到游戏的组件。")],-1),V=s("p",null,"这个组件系统被我们称之为 Flame Component System，简称FCS。",-1),Z=s("p",null,[i("每次游戏需要调整大小时，例如当方向改变，"),s("code",null,"FlameGame"),i("会调用所有组件调整大小的方法，并且会将这些信息传递给摄像头和视口。")],-1),N=s("p",null,[s("code",null,"FlameGame.camera"),i("控制空间坐标中的哪个点应该在屏幕的左上角（它的默认值是[0,0]，就像一个普通的Canvas）。")],-1),j=s("p",null,"下面是一个 FlameGame 实现的例子：",-1),O=s("div",{class:"language-dart vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"dart"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," MyCrate"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SpriteComponent"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // 创建一个渲染尺寸为16*16的crate.png精灵图组件")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  MyCrate"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," super"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(size"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Vector2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"all"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"16"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"), anchor"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Anchor"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},".center);")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  @override")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  Future"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"onLoad"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"async"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    sprite "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," await"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Sprite"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"load"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"'crate.png'"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  @override")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  void"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," onGameResize"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Vector2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gameSize) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    super"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"onGameResize"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(gameSize);")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 我们不需要在构造函数中设置位置，我们可以直接在这里设置")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // 因为它将在第一次呈现之前被调用一次")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    position "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," gameSize "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 2"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," MyGame"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," FlameGame"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  @override")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  Future"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"<"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"void"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"> "),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"onLoad"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"async"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"    await"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," add"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"MyCrate"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"());")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"main"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  final"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," myGame "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," MyGame"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  runApp"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    GameWidget"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      game"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," myGame,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    ),")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  );")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})],-1),J=s("p",null,"注意：如果您在构建方法中实例化您的游戏，那么每次重新构建Flutter树时，您的游戏都会重新构建，这通常比您想要的更加频繁。为避免这种情况，您可以先创建一个游戏实例，然后在您的组件结构中引用它，就像在上面的示例中所做的那样。",-1),U=s("p",null,[i("要从"),s("code",null,"FlameGame"),i("的列表中删除组件，可以使用"),s("code",null,"remove"),i("或"),s("code",null,"removeAll"),i("方法。如果您只想删除一个组件，可以使用第一种方法，如果您想删除一个组件列表，可以使用第二种方法。")],-1),q=s("p",null,[i("任何调用了"),s("code",null,"remove()"),i("方法的组件也将被删除，您只需执行"),s("code",null,"yourComponent.remove()"),i(";")],-1),H=s("h4",{id:"生命周期",tabindex:"-1"},[i("生命周期 "),s("a",{class:"header-anchor",href:"#生命周期","aria-label":'Permalink to "生命周期"'},"​")],-1),K=s("p",null,[s("img",{src:"https://ilgnefz.github.io/flame-cn/images/component-lifecycle.png",alt:"图片"}),i(" 当一个游戏第一次被添加到Flutter组件树时，以下生命周期方法将依次被调用："),s("code",null,"onGameResize"),i("，"),s("code",null,"onLoad"),i("和"),s("code",null,"onMount"),i("。在此之后，它继续每次来回调用"),s("code",null,"update"),i("和"),s("code",null,"render"),i("，直到组件从树中删除。一旦"),s("code",null,"GameWidget"),i("从树中移除，"),s("code",null,"onRemove"),i("就会被调用，就像从组件树中移除一个普通组件一样")],-1),Q=s("h4",{id:"调试模式",tabindex:"-1"},[i("调试模式 "),s("a",{class:"header-anchor",href:"#调试模式","aria-label":'Permalink to "调试模式"'},"​")],-1),X=s("p",null,[i("Flame的"),s("code",null,"FlameGame"),i("类提供了一个名为"),s("code",null,"debugMode"),i("的变量，默认为"),s("code",null,"false"),i("。当它被设置为"),s("code",null,"true"),i("时来启用游戏组件的调试功能。请注意，此变量的值在添加到游戏中时会传递给其组件，所以如果您在运行时更改debugMode，默认情况下不会影响已添加的组件")],-1),Y=s("h4",{id:"更改背景颜色",tabindex:"-1"},[i("更改背景颜色 "),s("a",{class:"header-anchor",href:"#更改背景颜色","aria-label":'Permalink to "更改背景颜色"'},"​")],-1),ss=s("p",null,[i("要想改变您的"),s("code",null,"FlameGame"),i("的背景颜色，您必须重写"),s("code",null,"backgroundColor()")],-1),is=s("p",null,[i("在下面的示例中，背景颜色设置为完全透明，因此您可以看到"),s("code",null,"GameWidget"),i("背后的小部件。默认为不透明黑色")],-1),as=s("div",{class:"language-dart vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"dart"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," MyGame"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," FlameGame"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  @override")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"  Color"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," backgroundColor"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"=>"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," const"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Color"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"0x00000000"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})],-1),ls=s("p",null,"请注意，在游戏运行时，背景颜色无法动态变化。但是如果您想动态地改变它，您可以只画一个背景来覆盖整个画布",-1),es=s("h4",{id:"singlegameinstance-mixin",tabindex:"-1"},[i("SingleGameInstance mixin "),s("a",{class:"header-anchor",href:"#singlegameinstance-mixin","aria-label":'Permalink to "SingleGameInstance mixin"'},"​")],-1),ts=s("p",null,[i("如果您正在制作一个单机游戏应用程序，可以将可选的"),s("code",null,"SingleGameInstance"),i("通过mixin应用到您的游戏中。这是一种构建游戏时的常见场景：一个全屏的"),s("code",null,"GameWidget"),i("托管了一个单一的"),s("code",null,"Game"),i("实例")],-1),ns=s("p",null,[i("添加这个"),s("code",null,"mixin"),i("可以在某些场景中提供性能优势。特别是，即使父组件尚未挂载，组件的"),s("code",null,"onLoad"),i("方法也保证在将其添加到父组件时启动。因此， "),s("code",null,"await"),i(" 时在"),s("code",null,"parent.add(component)"),i("上，始终保证组件加载完成")],-1),hs=s("div",{class:"language-dart vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"dart"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," MyGame"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," extends"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," FlameGame"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," with"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," SingleGameInstance"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"  // ...")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})],-1),ks=s("h4",{id:"低级游戏api",tabindex:"-1"},[i("低级游戏API "),s("a",{class:"header-anchor",href:"#低级游戏api","aria-label":'Permalink to "低级游戏API"'},"​")],-1),ds=s("p",null,[s("img",{src:"https://ilgnefz.github.io/flame-cn/images/game-mixin.png",alt:"图片"}),s("code",null,"Game minix"),i("是一个低级API，可以在当您想要实现如何构建游戏引擎的功能时使用。比如，"),s("code",null,"Game"),i("不实现任何"),s("code",null,"update"),i("或"),s("code",null,"render"),i("的功能。")],-1),ps=s("p",null,[s("code",null,"Loadable"),i(" minxi有"),s("code",null,"onLoad"),i("、"),s("code",null,"onMount"),i("和"),s("code",null,"onRemove"),i("几个生命周期方法。当游戏被加载 + 安装或删除时，这些方法会从 "),s("code",null,"GameWidget"),i(" (或者其他父类)中调用。只有在第一次将类添加到父类时才调用 "),s("code",null,"onLoad"),i("，但是"),s("code",null,"onMount"),i("(在"),s("code",null,"onLoad"),i("之后被调用)会在每次被添加到一个新的父类时被调用。当类从父类中移除时，将调用"),s("code",null,"onRemove"),i("。")],-1),rs=s("p",null,[i("注意："),s("code",null,"Game"),i("mixin允许更自由的实现任何事物，但如果您使用它，您也会错过它的所有内置功能。")],-1),os=s("p",null,[i("下面是一个"),s("code",null,"Game"),i("实现的例子:")],-1),Es=s("div",{class:"language-dart vp-adaptive-theme"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"dart"),s("pre",{class:"shiki shiki-themes github-light github-dark vp-code"},[s("code",{"v-pre":""},[s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"class"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," MyGameSubClass"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," with"),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," Game"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  @override")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  void"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," render"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"Canvas"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," canvas) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // ...")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  @override")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  void"),s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," update"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"double"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," dt) {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"    // ...")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  }")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")]),i(`
`),s("span",{class:"line"}),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"main"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"() {")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"  final"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," myGame "),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," MyGameSubClass"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"();")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}},"  runApp"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"    GameWidget"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"      game"),s("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},":"),s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," myGame,")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"    )")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"  );")]),i(`
`),s("span",{class:"line"},[s("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"}")])])]),s("button",{class:"collapse"})],-1),As={__name:"Flame",setup(cs,{expose:d}){const t=JSON.parse('{"title":"Flame","description":"","frontmatter":{"title":"Flame","date":"2024-11-17T00:00:00.000Z","updated":"2024-11-18T00:00:00.000Z","categories":"Dart","tags":["多平台","Dart","游戏开发","Flutter"]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[{"level":3,"title":"关于Flame","slug":"关于flame","link":"#关于flame","children":[]},{"level":3,"title":"安装方式","slug":"安装方式","link":"#安装方式","children":[]},{"level":3,"title":"文件结构","slug":"文件结构","link":"#文件结构","children":[]},{"level":3,"title":"游戏循环","slug":"游戏循环","link":"#游戏循环","children":[]}]}],"relativePath":"pages/posts/Flame.md","path":"D:/jesus-blue/valaxy-blog/pages/posts/Flame.md","lastUpdated":null}'),h=o(),n=t.frontmatter||{};return h.meta.frontmatter=Object.assign(h.meta.frontmatter||{},t.frontmatter||{}),k("pageData",t),k("valaxy:frontmatter",n),globalThis.$frontmatter=n,d({frontmatter:{title:"Flame",date:"2024-11-17T00:00:00.000Z",updated:"2024-11-18T00:00:00.000Z",categories:"Dart",tags:["多平台","Dart","游戏开发","Flutter"]}}),(l,ys)=>{const p=r;return E(),c(p,{frontmatter:g(n)},{"main-content-md":a(()=>[y,m,F,u,C,_,v,b,f,A,B,D,G,x,P,S,M,$,z,I,L,w,R,T,W,V,Z,N,j,O,J,U,q,H,K,Q,X,Y,ss,is,as,ls,es,ts,ns,hs,ks,ds,ps,rs,os,Es]),"main-header":a(()=>[e(l.$slots,"main-header")]),"main-header-after":a(()=>[e(l.$slots,"main-header-after")]),"main-nav":a(()=>[e(l.$slots,"main-nav")]),"main-content":a(()=>[e(l.$slots,"main-content")]),"main-content-after":a(()=>[e(l.$slots,"main-content-after")]),"main-nav-before":a(()=>[e(l.$slots,"main-nav-before")]),"main-nav-after":a(()=>[e(l.$slots,"main-nav-after")]),comment:a(()=>[e(l.$slots,"comment")]),footer:a(()=>[e(l.$slots,"footer")]),aside:a(()=>[e(l.$slots,"aside")]),"aside-custom":a(()=>[e(l.$slots,"aside-custom")]),default:a(()=>[e(l.$slots,"default")]),_:3},8,["frontmatter"])}}};export{As as default};
